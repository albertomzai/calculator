{"files":[{"name":"DOCUMENTATION.md","code":["# Visión General del Proyecto","El proyecto es una API RESTful sencilla construida con Flask que expone un único endpoint `/api/calculate`. Su propósito principal es evaluar expresiones matemáticas recibidas en formato JSON y devolver el resultado. La aplicación está estructurada de forma modular, separando la lógica de negocio (evaluación segura) del enrutamiento y la configuración de la app.","","## Arquitectura del Sistema","El sistema sigue una arquitectura clásica de microservicio con Flask:","- **Entrypoint** (`app.py`): importa `create_app()` y expone la instancia de Flask.  ","- **Factory** (`__init__.py`): configura la aplicación, registra blueprints y sirve el front‑end estático.  ","- **Blueprint** (`routes.py`): contiene la lógica del endpoint `/calculate` y la función interna `_eval_expr`.","- **Front‑End**: carpeta `../frontend` (no incluida en este repositorio) que se sirve como página principal.","","### Diagrama de Componentes","```mermaid\nflowchart TD\n    A[Cliente] -->|POST /api/calculate| B[Flask App]\n    B --> C{Blueprint api}\n    C --> D[_eval_expr]\n    D --> E[Resultado JSON]\n    B --> F[Static Files]\n```\n","## Endpoints de la API","| Método | Ruta | Parámetros | Respuesta | Código de Estado |\n|--------|------|------------|----------|-----------------|\n| POST   | `/api/calculate` | `{\"expression\": \"<string>\"}` | `{\"result\": <number>}` o `{\"error\": \"mensaje\"}` | 200 (OK) / 400 (Bad Request) / 422 (Unprocessable Entity)|","","### Detalle de la Lógica de Evaluación","La función `_eval_expr` analiza el AST generado por `ast.parse`. Solo permite operadores aritméticos básicos (`+`, `-`, `*`, `/`, `**`) y números enteros o flotantes. Cualquier otro nodo provoca un error de tipo `ValueError`. Se protege contra la división por cero lanzando `ZeroDivisionError` que se captura y devuelve con código 422.","","## Instrucciones de Instalación y Ejecución","1. **Clonar el repositorio**\n   ```bash\n   git clone https://github.com/usuario/repo.git\n   cd repo\n   ```\n2. **Crear entorno virtual** (opcional pero recomendado)\n   ```bash\n   python -m venv .venv\n   source .venv/bin/activate  # Windows: .venv\\Scripts\\activate\n   ```\n3. **Instalar dependencias**\n   ```bash\n   pip install -r requirements.txt\n   ```\n4. **Ejecutar la aplicación**\n   ```bash\n   export FLASK_APP=app.py  # Windows: set FLASK_APP=app.py\n   flask run\n   ```\n5. La API estará disponible en `http://127.0.0.1:5000/api/calculate`. El front‑end estático se sirve en la raíz `/`.","","## Flujo de Datos Clave","```mermaid\nsequenceDiagram\n    participant C as Cliente\n    participant F as Flask App\n    participant B as Blueprint API\n    participant E as _eval_expr\n\n    C->>F: POST /api/calculate {\"expression\": \"2+3*4\"}\n    F->>B: Llama calculate()\n    B->>E: parsear y evaluar expresión\n    E-->>B: Resultado 14\n    B-->>F: Respuesta JSON {\"result\": 14}\n    F-->>C: Enviar respuesta HTTP 200\n```\n","## Extensiones Futuras","- **Validación avanzada**: incorporar expresiones trigonométricas o funciones matemáticas estándar. \n- **Persistencia**: registrar historial de cálculos en una base de datos SQLite para auditoría.\n- **Autenticación**: proteger el endpoint con JWT o API keys.\n- **Escalado**: desplegar la app como un servicio Docker y orquestar con Kubernetes.",""]}]}
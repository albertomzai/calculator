<|channel|>final <|constrain|>JSON<|message|>{"files":[{"name":"README.md","code":["# Visión General del Proyecto","El proyecto es una API sencilla de cálculo que expone un endpoint `/api/calculate`. La aplicación está construida con **Flask** y se sirve junto a archivos estáticos (frontend) ubicados en `../frontend` mediante la ruta raíz (`/`). El flujo principal consiste en recibir una expresión matemática como cadena, parsearla con el módulo `ast`, evaluarla de forma segura y devolver el resultado en JSON.","","## Arquitectura del Sistema","El sistema se compone de los siguientes componentes principales:","- **Flask Application** – instancia central que registra blueprints y sirve archivos estáticos.","- **Blueprint `api_bp`** – contiene la lógica de negocio para evaluar expresiones matemáticas.","- **Parser Seguro** – utiliza el módulo `ast` para descomponer la expresión en un árbol sintáctico y evalúa solo operadores permitidos (`+`, `-`, `*`, `/`, `**`, unary minus).","- **Frontend Static Folder** – se sirve desde `../frontend` y contiene la interfaz de usuario.","","```mermaid\nflowchart TD\n    A[Client] -->|POST /api/calculate| B[Flask App]\n    B --> C{Parse Expression}\n    C -->|Valid| D[Evaluate AST]\n    D --> E[Return JSON Result]\n    C -->|Invalid| F[Return 422 Error]\n```","","## Endpoints de la API","| Método | Ruta | Descripción | Parámetros | Respuesta | Código de Estado |\n|--------|------|-------------|------------|-----------|-----------------|\n| POST   | /api/calculate | Evalúa una expresión matemática segura. | `{\"expression\": \"string\"}` | `{\"result\": number}` o `{\"error\": string}` | 200, 400 (bad request), 422 (unprocessable entity) |","","## Instrucciones de Instalación y Ejecución","1. **Clonar el repositorio**\n   ```bash\n   git clone https://github.com/usuario/proyecto.git\n   cd proyecto\n   ```\n2. **Crear entorno virtual**\n   ```bash\n   python3 -m venv .venv\n   source .venv/bin/activate  # Windows: .venv\\Scripts\\activate\n   ```\n3. **Instalar dependencias**\n   ```bash\n   pip install -r requirements.txt\n   ```\n4. **Ejecutar la aplicación**\n   ```bash\n   export FLASK_APP=app.py  # Linux/macOS\n   set FLASK_APP=app.py     # Windows CMD\n   flask run --host=0.0.0.0 --port=5000\n   ```\n5. **Probar el endpoint** (ejemplo con `curl`):\n   ```bash\n   curl -X POST http://localhost:5000/api/calculate \\\n        -H \"Content-Type: application/json\" \\\n        -d '{\"expression\": \"2 * (3 + 4)\"}'\n   ```","","## Flujo de Datos Clave","1. **Solicitud** – El cliente envía una petición POST con JSON `{\"expression\": \"...\"}` a `/api/calculate`.\n2. **Validación** – Se comprueba que el campo `expression` exista y sea cadena.\n3. **Parsing Seguro** – Se utiliza `ast.parse(expr, mode='eval')` para convertir la expresión en un árbol sintáctico.\n4. **Evaluación Recursiva** – `_eval_expr()` recorre el AST evaluando solo operadores permitidos; cualquier otro nodo provoca una excepción.\n5. **Respuesta** – Si la evaluación es exitosa, se devuelve `{\"result\": <valor>}` con código 200. En caso de error (división por cero, expresión inválida o tipo no soportado) se devuelve un mensaje de error y el código correspondiente (400/422).","","## Extensiones Futuras","- **Soporte para funciones matemáticas** (`sin`, `cos`, `sqrt`), añadiendo una tabla de funciones permitidas y validando su uso en el AST.\n- **Persistencia de historial** – Guardar cada cálculo en una base de datos (SQLite/PostgreSQL) para permitir consultas posteriores.\n- **Autenticación JWT** – Proteger el endpoint con tokens, especialmente si se expande a cálculos más complejos o sensibles.\n- **Documentación OpenAPI** – Generar automáticamente la especificación y servirla mediante Swagger UI.\n"]}]}
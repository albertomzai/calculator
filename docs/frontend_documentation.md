{
  "files": [
    {
      "filename": "docs/calculadora_web_documentacion.md",
      "action": "create_or_update",
      "code": [
        "# Visión General del Proyecto",
        "",
        "El proyecto es una **calculadora web** sencilla, implementada con HTML, CSS y JavaScript puro. La interfaz de usuario está compuesta por un visor que muestra la expresión actual o el resultado final, y una cuadrícula de botones para los dígitos, operadores aritméticos y funciones especiales (igual, borrar).",
        "",
        "Al pulsar cualquier botón numérico u operador, se construye una cadena `expression` que representa la operación a evaluar. Cuando el usuario pulsa el botón **=**, la expresión se envía al backend mediante una petición `POST /api/calculate`. El servidor procesa la expresión y devuelve el resultado, que luego se muestra en el visor.",
        "",
        "El flujo de interacción es totalmente asíncrono: mientras se espera la respuesta del servidor, la UI permanece receptiva y no bloquea al usuario. En caso de error (por ejemplo, una expresión inválida), el cliente captura la excepción y muestra un mensaje genérico \"Error\" en pantalla.",
        "",
        "El proyecto está pensado como punto de partida para explorar conceptos de arquitectura de API RESTful, manejo de expresiones matemáticas seguras y diseño de interfaces ligeras.",
        "",
        "---",
        "# Arquitectura del Sistema",
        "",
        "La aplicación se divide en dos capas:",
        "",
        "- **Frontend**: HTML/CSS/JS que renderiza la calculadora y comunica con el backend vía HTTP.",
        "- **Backend**: Un servicio REST expuesto bajo `/api/calculate` que recibe una expresión JSON, valida y evalúa de forma segura y devuelve el resultado.",
        "",
        "A continuación se muestra un diagrama Mermaid que ilustra la interacción entre cliente y servidor:",
        "",
        "```mermaid",
        "sequenceDiagram",
        "    participant User as Usuario",
        "    participant Browser as Navegador",
        "    participant Server as Backend",
        "",
        "    User->>Browser: Pulsa botón =",
        "    Browser->>Server: POST /api/calculate { expression }",
        "    Server-->>Browser: 200 OK { result }",
        "    Browser->>User: Muestra resultado en visor",
        "```",
        "",
        "---",
        "# Endpoints de la API",
        "",
        "| Método | Ruta            | Descripción                               | Payload de Entrada                 | Respuesta (JSON)                     | Código HTTP |",
        "|--------|-----------------|-------------------------------------------|------------------------------------|--------------------------------------|-------------|",
        "| POST   | `/api/calculate` | Evalúa una expresión aritmética segura    | `{ \"expression\": \"2+3*4\" }`      | `{ \"result\": 14 }`                  | 200 OK      |",
        "| POST   | `/api/calculate` | Error de sintaxis o evaluación            | `{ \"expression\": \"2++3\" }`      | `{ \"message\": \"Invalid expression\"}` | 400 Bad Request |",
        "",
        "## Detalles de Implementación",
        "",
        "- **Validación**: Se evita la ejecución directa de `eval`. En un entorno real se usaría una librería como `mathjs` con sandboxing.",
        "- **Seguridad**: Sólo se aceptan caracteres numéricos y operadores aritméticos básicos (`+ - * / .`).",
        "",
        "---",
        "# Instrucciones de Instalación y Ejecución",
        "",
        "1. Clonar el repositorio:",
        "",
        "   ```bash",
        "   git clone https://github.com/tuusuario/calculadora-web.git",
        "   cd calculadora-web",
        "   ```",
        "",
        "2. Instalar dependencias (Node.js 18+):",
        "",
        "   ```bash",
        "   npm install",
        "   ```",
        "",
        "3. Ejecutar el servidor:",
        "",
        "   ```bash",
        "   npm start",
        "   ```",
        "",
        "4. Abrir el navegador en `http://localhost:3000` y usar la calculadora.",
        "",
        "---",
        "# Flujo de Datos Clave",
        "",
        "1. **Entrada del usuario** – Pulsar botones numéricos/opera­torios → se concatena a `expression`.",
        "2. **Solicitud al backend** – Al pulsar `=`, el cliente envía:",
        "",
        "   ```json",
        "   { \"expression\": \"<cadena>\" }",
        "   ```",
        "",
        "3. **Procesamiento en servidor** – Se valida la expresión, se evalúa y se devuelve:",
        "",
        "   ```json",
        "   { \"result\": <valor numérico> }",
        "   ```",
        "",
        "4. **Actualización de UI** – El cliente recibe el resultado, actualiza `expression` con él y refresca el visor.",
        "",
        "---",
        "# Extensiones Futuras (Opcional)",
        "",
        "- **Persistencia**: Añadir una tabla SQLite para almacenar historial de cálculos por usuario.",
        "- **Autenticación**: JWT para identificar usuarios y limitar el número de peticiones.",
        "- **Soporte avanzado**: Funciones trigonométricas, exponenciación, notación científica.",
        "- **UI React/Vue**: Reescribir la capa frontend con un framework moderno para mayor escalabilidad."
      ]
    }
  ]
}
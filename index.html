<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <title>Calculadora Web</title>
  <style>
    body {font-family: Arial, sans-serif; display:flex; justify-content:center; align-items:center; height:100vh;background:#f0f0f0;}
    .calculator{background:#fff;padding:20px;border-radius:10px;box-shadow:0 4px 10px rgba(0,0,0,.1);display:grid;grid-template-rows:auto 1fr;gap:10px;width:260px;}
    .screen{font-size:2rem;text-align:right;padding:10px;background:#222;color:#fff;border-radius:5px;min-height:50px;overflow:hidden;word-wrap:break-word;}
    .buttons{display:grid;grid-template-columns:repeat(4,1fr);gap:10px;}
    button{font-size:1.2rem;padding:15px;background:#e0e0e0;border:none;border-radius:5px;cursor:pointer;transition:background .2s;}button:hover{background:#d0d0d0;}
  </style>
</head>
<body>
<div class="calculator">
  <div id="screen" class="screen">0</div>
  <div class="buttons">
    <button data-value="7">7</button><button data-value="8">8</button><button data-value="9">9</button><button data-op="/">÷</button>
    <button data-value="4">4</button><button data-value="5">5</button><button data-value="6">6</button><button data-op="*">×</button>
    <button data-value="1">1</button><button data-value="2">2</button><button data-value="3">3</button><button data-op="-">−</button>
    <button data-val="0">0</button><button data-dot>•</button><button id="clear">C</button><button data-op= "+">+</button>
    <button id="equal" style="grid-column:span 4; background:#4caf50;color:white;">=</button>
  </div>
</div>
<script>
const screen = document.getElementById('screen');
let expression = '';
function updateScreen(val){
  if(screen.textContent==='0') screen.textContent='';
  screen.textContent += val;
}
Array.from(document.querySelectorAll('[data-value]')).forEach(btn=>{
  btn.addEventListener('click',()=>{expression+=btn.dataset.value;updateScreen(btn.textContent);});
});
Array.from(document.querySelectorAll('[data-op]')).forEach(btn=>{
  btn.addEventListener('click',()=>{expression+=btn.dataset.op;updateScreen(btn.textContent);});
});
document.querySelector('#clear').addEventListener('click',()=>{expression='';screen.textContent='0';});
document.querySelector('#equal').addEventListener('click',async()=>{
  if(!expression) return;
  try{
    const res=await fetch('/api/calculate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({expression})});
    const data=await res.json();
    screen.textContent=data.result.toString();
    expression='';
  }catch(e){screen.textContent='Error';}
});
document.querySelector('[data-dot]').addEventListener('click',()=>{expression+='.';updateScreen('.');});
</script>
</body>
</html>
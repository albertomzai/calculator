<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Calculadora API</title>
  <style>
    body { font-family: Arial, sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; margin:0; }
    .calculator { width: 260px; border: 1px solid #ccc; padding:10px; border-radius:5px; background:#f9f9f9; }
    .display { width: 100%; height:40px; text-align:right; font-size:1.2em; margin-bottom:10px; padding:5px; border:1px solid #ddd; border-radius:3px; }
    .buttons { display:grid; grid-template-columns:repeat(4,1fr); gap:5px; }
    button { padding:15px; font-size:1em; }
  </style>
</head>
<body>
<div class="calculator">
  <input type="text" id="display" class="display" readonly />
  <div class="buttons">
    <button data-value="7">7</button><button data-value="8">8</button><button data-value="9">9</button><button data-value="/">/</button>
    <button data-value="4">4</button><button data-value="5">5</button><button data-value="6">6</button><button data-value="*">*</button>
    <button data-value="1">1</button><button data-value="2">2</button><button data-value="3">3</button><button data-value="-">-</button>
    <button data-value="0">0</button><button data-value=".">.</button><button id="equals">=</button><button data-value="+">+</button>
    <button id="clear" style="grid-column:span 4; background:#e74c3c; color:white;">C</button>
  </div>
</div>
<script>
const display = document.getElementById('display');
document.querySelectorAll('.buttons button').forEach(btn=>{
  btn.addEventListener('click', ()=>{
    const val=btn.dataset.value;
    if(val){display.value+=val;}
    else if(btn.id==='equals'){
      fetch('/api/calculate',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({expression:display.value})})
        .then(r=>r.json()).then(d=>{if(d.result!==undefined)display.value=d.result;else display.value='Error';});
    }
    else if(btn.id==='clear'){
      display.value='';
    }
  });
});
</script>
</body>
</html>